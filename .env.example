# Vikunja MCP Server Configuration
# Copy this file to .env and configure your environment

# =============================================================================
# AUTHENTICATION CONFIGURATION
# =============================================================================

# Vikunja server URL (required for auto-authentication)
# Example: https://vikunja.example.com or http://localhost:3456
VIKUNJA_URL=https://vikunja.example.com

# Vikunja API token (required for auto-authentication)
# Get this from your Vikunja settings -> API Keys
# Format: tk_xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx (API Token)
# Format: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9... (JWT Token for full access)
VIKUNJA_API_TOKEN=your-api-token-here

# =============================================================================
# MCP PROXY CONFIGURATION (Docker deployment)
# =============================================================================

# API key for authenticating MCP proxy requests (optional, recommended for production)
# Clients must include this in the X-API-Key header
# MCP_PROXY_API_KEY=your-secure-api-key-here

# Network configuration
MCP_PROXY_HOST=::                  # Host to listen on (:: for all interfaces)
MCP_PROXY_PORT=8080                # Port to listen on

# Timeout configuration (in milliseconds)
MCP_PROXY_CONNECTION_TIMEOUT=60000       # Initial connection timeout (60 seconds)
MCP_PROXY_REQUEST_TIMEOUT=300000         # Request timeout (5 minutes)
MCP_PROXY_GRACEFUL_SHUTDOWN_TIMEOUT=5000 # Graceful shutdown timeout (5 seconds)

# Endpoint configuration
MCP_PROXY_SSE_ENDPOINT=/sse        # SSE endpoint path
MCP_PROXY_STREAM_ENDPOINT=/mcp     # Stream endpoint path

# Server type (optional: "sse", "stream", or leave empty for both)
# MCP_PROXY_SERVER_TYPE=sse

# Enable stateless mode (no session management)
# MCP_PROXY_STATELESS=false

# Enable debug logging for mcp-proxy
# MCP_PROXY_DEBUG=false

# =============================================================================
# MCP SERVER CONFIGURATION
# =============================================================================

# MCP server mode (optional)
# Values: server, client, standalone
MCP_MODE=server

# =============================================================================
# LOGGING CONFIGURATION - AORP ALWAYS ENABLED
# =============================================================================

# Log level (optional)
# Values: error, warn, info, debug
# Default: info (production), debug (development)
LOG_LEVEL=info

# Debug logging (always enabled for AORP resilience monitoring)
# Values: true, false
# Default: true (AORP requires comprehensive logging)
DEBUG=true

# =============================================================================
# RATE LIMITING CONFIGURATION - AORP ALWAYS ENABLED
# =============================================================================

# AORP requires rate limiting to be always enabled for operational resilience
# Rate limiting cannot be disabled

# Default tool rate limits
RATE_LIMIT_PER_MINUTE=60           # Requests per minute for standard tools
RATE_LIMIT_PER_HOUR=1000           # Requests per hour for standard tools
MAX_REQUEST_SIZE=1048576           # Maximum request size in bytes (1MB)
MAX_RESPONSE_SIZE=10485760         # Maximum response size in bytes (10MB)  
TOOL_TIMEOUT=30000                 # Tool execution timeout in milliseconds (30s)

# Expensive tool rate limits (for resource-intensive operations)
EXPENSIVE_RATE_LIMIT_PER_MINUTE=10        # Requests per minute for expensive tools
EXPENSIVE_RATE_LIMIT_PER_HOUR=100         # Requests per hour for expensive tools
EXPENSIVE_MAX_REQUEST_SIZE=2097152        # Maximum request size in bytes (2MB)
EXPENSIVE_MAX_RESPONSE_SIZE=52428800      # Maximum response size in bytes (50MB)
EXPENSIVE_TOOL_TIMEOUT=120000             # Tool execution timeout in milliseconds (2 min)

# Bulk operation rate limits (for batch operations)
BULK_RATE_LIMIT_PER_MINUTE=5              # Requests per minute for bulk operations
BULK_RATE_LIMIT_PER_HOUR=50               # Requests per hour for bulk operations
BULK_MAX_REQUEST_SIZE=5242880             # Maximum request size in bytes (5MB)
BULK_MAX_RESPONSE_SIZE=104857600          # Maximum response size in bytes (100MB)
BULK_TOOL_TIMEOUT=300000                  # Tool execution timeout in milliseconds (5 min)

# Export operation rate limits (for data export operations)
EXPORT_RATE_LIMIT_PER_MINUTE=2            # Requests per minute for export operations
EXPORT_RATE_LIMIT_PER_HOUR=10             # Requests per hour for export operations
EXPORT_MAX_REQUEST_SIZE=1048576           # Maximum request size in bytes (1MB)
EXPORT_MAX_RESPONSE_SIZE=1073741824       # Maximum response size in bytes (1GB)
EXPORT_TOOL_TIMEOUT=600000                # Tool execution timeout in milliseconds (10 min)

# =============================================================================
# FEATURE FLAGS - AORP ALWAYS ENABLED
# =============================================================================

# All features are always enabled for AORP operational resilience
# Server-side filtering, advanced metrics, and experimental features cannot be disabled
VIKUNJA_ENABLE_SERVER_SIDE_FILTERING=true

# =============================================================================
# ENVIRONMENT PROFILES
# =============================================================================

# Set NODE_ENV to activate environment-specific configurations:
# - development: Debug logging, relaxed rate limits, experimental features
# - test: Error-only logging, disabled rate limiting, consistent behavior  
# - production: Standard logging, full rate limiting, stable features
NODE_ENV=production

# =============================================================================
# CONFIGURATION MIGRATION NOTES
# =============================================================================

# This .env.example documents all environment variables used by the Vikunja MCP server.
# The server uses a centralized configuration system with the following priorities:
#
# 1. Additional sources (programmatic configuration)
# 2. Environment variables (this file)
# 3. Environment profiles (development/test/production defaults)
# 4. Schema defaults (fallback values)
#
# Environment-specific behavior (AORP optimized):
#
# DEVELOPMENT:
# - Debug logging enabled for AORP resilience monitoring
# - Rate limiting enabled for AORP operational resilience
# - Server-side filtering enabled for AORP performance
# - All features enabled for AORP testing
#
# TEST:
# - Error-only logging for AORP test output clarity
# - Rate limiting enabled for AORP operational resilience testing
# - Server-side filtering enabled for AORP consistency
# - All features enabled for AORP comprehensive testing
#
# PRODUCTION:
# - Info-level logging with debug information for AORP monitoring
# - Full rate limiting enabled for AORP operational protection
# - Server-side filtering enabled for AORP performance optimization
# - All features enabled for AORP maximum resilience
#
# For more information, see src/config/ConfigurationManager.ts